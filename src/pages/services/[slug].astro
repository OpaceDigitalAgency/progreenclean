---
import SiteLayout from '../../layouts/SiteLayout.astro';
import Breadcrumbs from '../../components/Breadcrumbs.astro';
import FaqAccordion from '../../components/FaqAccordion.astro';
import CtaBanner from '../../components/CtaBanner.astro';
import { generateServiceSchema, generateFaqSchema } from '../../utils/seo.js';
import services from '../../data/services.json';

export function getStaticPaths() {
  return services.map((s) => ({ params: { slug: s.slug }, props: { service: s } }));
}

const { service } = Astro.props;
const serviceSchema = generateServiceSchema(service);
const faqSchema = generateFaqSchema(service.faqs);
---
<SiteLayout
  title={`${service.title} in Epsom, Surrey`}
  description={service.longDescription}
  schemas={[serviceSchema, faqSchema]}
>
  <section class="relative overflow-hidden py-16 lg:py-20">
    <div class="absolute inset-0 bg-gradient-to-br from-aqua-light via-white to-off-white -z-10"></div>
    <div class="max-w-7xl mx-auto px-4 lg:px-8">
      <div class="max-w-3xl">
        <div class="w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mb-6">
          <span class="material-symbols-rounded text-4xl text-primary">{service.icon}</span>
        </div>
        <h1 class="font-heading font-extrabold text-4xl md:text-5xl text-navy leading-tight mb-4">{service.title}</h1>
        <p class="text-lg text-navy/70 mb-6 leading-relaxed">{service.longDescription}</p>
        <div class="flex flex-wrap items-center gap-4">
          <span class="bg-accent/10 text-accent font-heading font-bold px-4 py-2 rounded-full">{service.price}</span>
          <a href="/quote/" class="inline-block bg-primary hover:bg-primary-dark text-white font-heading font-bold px-8 py-3 rounded-full transition-colors shadow-lg shadow-primary/25">Get a Quote</a>
          <a href="tel:01372898732" class="inline-block border-2 border-navy/10 text-navy font-heading font-bold px-8 py-3 rounded-full hover:bg-gray-50 transition-colors">Call Us</a>
        </div>
      </div>
    </div>
  </section>
  <Breadcrumbs items={[{ name: 'Home', url: '/' }, { name: 'Services', url: '/services/' }, { name: service.title }]} />
  <section class="py-16 lg:py-20 bg-white">
    <div class="max-w-3xl mx-auto px-4 lg:px-8">
      <h2 class="font-heading font-bold text-2xl text-navy mb-4">What Is Included</h2>
      <div class="prose prose-navy max-w-none text-navy/70 leading-relaxed mb-12">
        <p>{service.longDescription} We use professional-grade equipment and eco-friendly products on every job, and we always leave the site tidy when we are done.</p>
        <p>All prices are starting guides. We will give you a firm quote once we know the specifics of your property and the scope of work.</p>
      </div>
      <h2 class="font-heading font-bold text-2xl text-navy mb-6">Frequently Asked Questions</h2>
      <FaqAccordion faqs={service.faqs} />
    </div>
  </section>
  <CtaBanner headline={`Ready to Book Your ${service.title}?`} text="Get a free, no-obligation quote in under two minutes â€” or call us and we will talk you through the options." />
</SiteLayout>

