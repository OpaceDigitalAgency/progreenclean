---
import SiteLayout from "../../layouts/SiteLayout.astro";
import PageHero from "../../components/PageHero.astro";
import WaveDivider from "../../components/WaveDivider.astro";
import Breadcrumbs from "../../components/Breadcrumbs.astro";
import FaqAccordion from "../../components/FaqAccordion.astro";
import TestimonialStrip from "../../components/TestimonialStrip.astro";
import CtaBanner from "../../components/CtaBanner.astro";
import ServiceIcon from "../../components/ServiceIcon.astro";
import { generateServiceSchema, generateFaqSchema } from "../../utils/seo.js";
import services from "../../data/services.json";
import reviews from "../../data/reviews.json";

export function getStaticPaths() {
  return services.map((s) => ({
    params: { slug: s.slug },
    props: { service: s },
  }));
}

const { service } = Astro.props;
const serviceSchema = generateServiceSchema(service);
const faqSchema = generateFaqSchema(service.faqs);
---

<SiteLayout
  title={`${service.title} in Epsom, Surrey`}
  description={service.longDescription}
  schemas={[serviceSchema, faqSchema]}
>
  <PageHero
    headline={service.title}
    subheadline={service.longDescription}
    ctaText="Get a Free Quote"
    ctaHref="/quote/"
    secondaryCtaText="Call Us"
    secondaryCtaHref="tel:01372898732"
  />
  <WaveDivider variant="teal-to-white" />
  <Breadcrumbs
    items={[
      { name: "Home", url: "/" },
      { name: "Services", url: "/services/" },
      { name: service.title },
    ]}
  />
  <section class="py-16 lg:py-20 bg-white">
    <div class="max-w-7xl mx-auto px-4 lg:px-8">
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-12">
        <div class="lg:col-span-2">
          <h2 class="font-heading font-bold text-2xl text-navy mb-4">
            What Is Included
          </h2>
          <div
            class="prose prose-navy max-w-none text-navy/70 leading-relaxed mb-12"
          >
            <p>
              {service.longDescription} We use professional-grade equipment and eco-friendly
              products on every job, and we always leave the site tidy when we are
              done.
            </p>
            <p>
              All prices are starting guides. We will give you a firm quote once
              we know the specifics of your property and the scope of work.
            </p>
          </div>
          <h2 class="font-heading font-bold text-2xl text-navy mb-6">
            Frequently Asked Questions
          </h2>
          <FaqAccordion faqs={service.faqs} />
        </div>
        <div>
          <div class="bg-[#dfedea] rounded-2xl p-6 sticky top-24">
            <div class="mb-4">
              <ServiceIcon slug={service.slug} size="w-14 h-14" />
            </div>
            <h3 class="font-heading font-bold text-xl text-navy mb-2">
              {service.title}
            </h3>
            <p class="text-navy/60 text-sm mb-4 leading-relaxed">
              {service.longDescription}
            </p>
            <div
              class="inline-block bg-accent/10 text-accent font-heading font-bold px-4 py-2 rounded-full text-sm mb-6"
            >
              {service.price}
            </div>
            <div class="space-y-3">
              <a
                href="/quote/"
                class="block w-full text-center bg-accent hover:bg-accent-dark text-white font-heading font-bold px-6 py-3 rounded-full transition-all shadow-md hover:shadow-lg"
                >Get a Quote</a
              >
              <a
                href="tel:01372898732"
                class="block w-full text-center bg-white hover:bg-white/90 text-navy font-heading font-bold px-6 py-3 rounded-full transition-all border border-navy/10"
                >Call 01372 898732</a
              >
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <TestimonialStrip
    reviews={reviews}
    heading="What Customers Say About Our Work"
  />
  <CtaBanner
    headline={`Ready to Book Your ${service.title}?`}
    text="Get a free, no-obligation quote in under two minutes â€” or call us and we will talk you through the options."
  />
</SiteLayout>
