---
interface Props {
  formName: string;
  successMessage?: string;
}

const { formName, successMessage = 'Thanks for getting in touch â€” we will be back to you shortly.' } = Astro.props;
const isSuccess = Astro.url.searchParams.get('success') === '1';
---
{isSuccess ? (
  <div class="bg-aqua-light border border-primary/30 rounded-2xl p-8 text-center" role="alert">
    <span class="material-symbols-rounded text-5xl text-primary mb-4 block">check_circle</span>
    <h2 class="font-heading font-bold text-2xl text-navy mb-2">Message sent!</h2>
    <p class="text-navy/70">{successMessage}</p>
  </div>
) : (
  <form
    method="POST"
    data-netlify="true"
    netlify-honeypot="bot-field"
    name={formName}
    action={`${Astro.url.pathname}?success=1`}
    class="space-y-6"
  >
    <input type="hidden" name="form-name" value={formName} />
    <p class="hidden"><label>Do not fill this in: <input name="bot-field" /></label></p>
    <slot />
  </form>
)}

